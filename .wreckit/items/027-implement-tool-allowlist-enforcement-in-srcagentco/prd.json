{
  "schema_version": 1,
  "id": "027-implement-tool-allowlist-enforcement-in-srcagentco",
  "branch_name": "wreckit/027-implement-tool-allowlist-enforcement-in-srcagentco",
  "user_stories": [
    {
      "id": "US-001",
      "title": "Verify Codex SDK runner implementation is complete",
      "acceptance_criteria": [
        "TypeScript compilation succeeds: `bun run build` passes without errors",
        "File `src/agent/codex-sdk-runner.ts` exists and has ~372 lines (full implementation)",
        "grep confirms SDK import at line 1: `import { query } from \"@anthropic-ai/claude-agent-sdk\"`",
        "grep confirms tool allowlist enforcement at line 113: `tools: effectiveTools`",
        "grep confirms helper functions exist: `handleSdkError`, `formatSdkMessage`, `emitAgentEventsFromSdkMessage`"
      ],
      "priority": 1,
      "status": "done",
      "notes": "Verification complete. The implementation is fully present in src/agent/codex-sdk-runner.ts with all required components: SDK import, tool allowlist enforcement via the `tools` SDK option, error handling, message formatting, and event emission. The file contains 372 lines - the previous research showing 85 lines was outdated."
    },
    {
      "id": "US-002",
      "title": "Update ROADMAP.md to mark objective complete",
      "acceptance_criteria": [
        "ROADMAP.md line 23 shows '- [x]' (not '- [ ]') for the codex-sdk-runner.ts objective",
        "grep confirms change: `grep \"codex-sdk-runner\" ROADMAP.md` returns line containing `[x]`",
        "No other lines in ROADMAP.md were accidentally modified"
      ],
      "priority": 1,
      "status": "done",
      "notes": "ROADMAP.md line 23 already shows `[x]` for codex-sdk-runner.ts objective. Milestone M2 objective is marked complete. No additional changes needed."
    }
  ]
}
