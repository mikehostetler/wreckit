{
  "schema_version": 1,
  "id": "027-implement-tool-allowlist-enforcement-in-srcagentco",
  "branch_name": "wreckit/027-implement-tool-allowlist-enforcement-in-srcagentco",
  "user_stories": [
    {
      "id": "US-001",
      "title": "Verify Codex SDK runner implementation completeness",
      "acceptance_criteria": [
        "Tests pass: `bun test ./src/__tests__/codex-sdk-runner.test.ts` runs 5 tests successfully",
        "Type checking passes: `npx tsc --noEmit` completes without errors",
        "Build succeeds: `bun run build` completes without errors",
        "Tool allowlist enforcement exists: `grep 'tools: effectiveTools' src/agent/codex-sdk-runner.ts` returns line 113",
        "No incomplete markers: `grep -c 'TODO|FIXME|not yet implemented' src/agent/codex-sdk-runner.ts` returns 0"
      ],
      "priority": 1,
      "status": "done",
      "notes": "Verification confirms the implementation is complete. The file has 372 lines with full SDK integration following the amp-sdk-runner.ts pattern."
    },
    {
      "id": "US-002",
      "title": "Verify unit tests exist and pass",
      "acceptance_criteria": [
        "Test file exists: `test -f src/__tests__/codex-sdk-runner.test.ts` succeeds",
        "Tests pass: `bun test src/__tests__/codex-sdk-runner.test.ts` shows 5 passing tests",
        "Dry-run mode test exists: grep confirms 'dry-run' test case",
        "Tool allowlist resolution tests exist: grep confirms priority tests"
      ],
      "priority": 1,
      "status": "done",
      "notes": "Unit tests exist at src/__tests__/codex-sdk-runner.test.ts with 129 lines covering dry-run mode, tool restrictions logging, and getEffectiveToolAllowlist priority resolution."
    },
    {
      "id": "US-003",
      "title": "Verify ROADMAP.md shows objective as complete",
      "acceptance_criteria": [
        "ROADMAP.md line 23 shows '[x]' for the codex-sdk-runner.ts objective",
        "Grep confirms: `grep 'codex-sdk-runner' ROADMAP.md` returns line containing '[x]'",
        "M2 milestone shows this as one of the completed objectives"
      ],
      "priority": 1,
      "status": "done",
      "notes": "ROADMAP.md line 23 already shows `[x]` for the codex-sdk-runner.ts objective. M2 milestone now shows 2 of 5 objectives complete."
    }
  ]
}
