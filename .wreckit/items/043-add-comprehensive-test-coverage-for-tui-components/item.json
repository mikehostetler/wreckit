{
  "schema_version": 1,
  "id": "043-add-comprehensive-test-coverage-for-tui-components",
  "title": "Add comprehensive test coverage for TUI components",
  "state": "idea",
  "overview": "TUI components handle complex state and user interactions but lack unit tests, making refactoring risky and bugs likely to go undetected.\n\n**Motivation:** TUI bugs are particularly disruptive because they affect the user interface directly. Without tests, changes to scroll handling, state updates, or keyboard input handling can introduce subtle bugs.\n\n**Success criteria:**\n- Unit tests for InkApp component state management\n- Tests for scroll offset calculation and auto-scroll\n- Tests for keyboard input handling (q, l, j, k, etc.)\n- Tests for all pane components (ItemsPane, LogsPane, etc.)\n- Coverage > 80% for TUI components\n\n**Technical constraints:**\n- Testing Ink components requires specific test utilities\n- Need to mock useInput, useStdout hooks\n- Tests must work in CI (headless environment)\n- Cannot add heavy UI testing dependencies\n\n**In scope:**\n- Add unit tests for InkApp.tsx state and hooks\n- Add tests for scroll logic in handleScroll callback\n- Add tests for keyboard input handlers\n- Add tests for pane rendering and props\n**Out of scope:**\n- End-to-end TUI testing with terminal emulation\n- Visual regression testing\n- Performance testing for large logs\n\n**Signals:** priority: medium",
  "branch": null,
  "pr_url": null,
  "pr_number": null,
  "last_error": null,
  "created_at": "2026-01-25T23:03:02.982Z",
  "updated_at": "2026-01-25T23:03:02.982Z",
  "problem_statement": "TUI components handle complex state and user interactions but lack unit tests, making refactoring risky and bugs likely to go undetected.",
  "motivation": "TUI bugs are particularly disruptive because they affect the user interface directly. Without tests, changes to scroll handling, state updates, or keyboard input handling can introduce subtle bugs.",
  "success_criteria": [
    "Unit tests for InkApp component state management",
    "Tests for scroll offset calculation and auto-scroll",
    "Tests for keyboard input handling (q, l, j, k, etc.)",
    "Tests for all pane components (ItemsPane, LogsPane, etc.)",
    "Coverage > 80% for TUI components"
  ],
  "technical_constraints": [
    "Testing Ink components requires specific test utilities",
    "Need to mock useInput, useStdout hooks",
    "Tests must work in CI (headless environment)",
    "Cannot add heavy UI testing dependencies"
  ],
  "scope_in_scope": [
    "Add unit tests for InkApp.tsx state and hooks",
    "Add tests for scroll logic in handleScroll callback",
    "Add tests for keyboard input handlers",
    "Add tests for pane rendering and props"
  ],
  "scope_out_of_scope": [
    "End-to-end TUI testing with terminal emulation",
    "Visual regression testing",
    "Performance testing for large logs"
  ],
  "priority_hint": "medium",
  "source": "dreamer"
}
