{
  "schema_version": 1,
  "id": "074-sprites-dev-authentication",
  "title": "Align Sprite Integration with Real CLI & Token",
  "section": "infrastructure",
  "state": "critique",
  "overview": "Update the existing Sprite integration to use the official `sprite` CLI commands (`create`, `console`) and authenticate using the provided Sprites.dev API token. This refactors Item 073 to match the actual production environment.",
  "branch": null,
  "pr_url": null,
  "pr_number": null,
  "last_error": null,
  "created_at": "2026-01-27T23:30:00.000Z",
  "updated_at": "2026-01-27T23:41:53.060Z",
  "problem_statement": "Item 073 targeted a generic `wisp` binary. The real tool is `sprite`, uses different subcommands, and requires a token.",
  "motivation": "To make the Sprite integration functional with the user's actual credentials.",
  "success_criteria": [
    "Token stored securely in `.wreckit/config.local.json`",
    "`SpriteRunner` calls `sprite` binary instead of `wisp`",
    "Commands mapped: start->create, attach->console, kill->delete",
    "Environment variable `SPRITES_TOKEN` injected into subprocesses"
  ],
  "technical_constraints": [
    "Use existing infrastructure",
    "Secure token handling"
  ],
  "scope_in_scope": [
    "src/agent/sprite-runner.ts",
    "src/agent/env.ts",
    "src/commands/sprite.ts"
  ],
  "scope_out_of_scope": [],
  "priority_hint": "high",
  "urgency_hint": "Fixing broken integration"
}
